<div class="container mt-4">
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="/home">Home</a></li>
      <li class="breadcrumb-item"><a href="/browse">Products</a></li>
      <li class="breadcrumb-item active">{{product.displayTitle}}</li>
    </ol>
  </nav>

  <div class="row">
    <!-- Product Image -->
    <div class="col-md-5">
      <div class="card">
        <img src="{{product.imagepath}}" class="card-img-top" alt="{{product.displayTitle}}" style="max-height: 400px; object-fit: contain; padding: 20px;">
      </div>
    </div>

    <!-- Product Info -->
    <div class="col-md-7">
      <h2>{{product.displayTitle}}</h2>
      <div class="mb-3">
        <span class="badge badge-primary">{{#if (eq product._type 'dogfood')}}Dog Food{{else}}Supply{{/if}}</span>
      </div>
      
      <h3 class="text-success mb-4">${{product.displayPrice}}</h3>
      
      <div class="mb-4">
        <h5>Description</h5>
        <p class="text-muted" style="white-space: pre-line;">{{#if product.longDescription}}{{product.longDescription}}{{else}}{{product.displayDescription}}{{/if}}</p>
      </div>

      <!-- Add to Cart -->
      <div class="mb-4">
        <a href="/cart/add/{{product._type}}/{{product._id}}" class="btn btn-success btn-lg btn-block">
          <i class="fas fa-shopping-cart"></i> Add to Cart
        </a>
      </div>

      <!-- Product Features -->
      <div class="card mb-4">
        <div class="card-header">
          <h5 class="mb-0">Product Features</h5>
        </div>
        <div class="card-body">
          <ul class="list-unstyled">
            {{#if (eq product._type 'dogfood')}}
              <li><i class="fas fa-check text-success"></i> Premium quality ingredients</li>
              <li><i class="fas fa-check text-success"></i> Balanced nutrition for dogs</li>
              <li><i class="fas fa-check text-success"></i> Suitable for all breeds</li>
              <li><i class="fas fa-check text-success"></i> No artificial preservatives</li>
            {{else}}
              <li><i class="fas fa-check text-success"></i> Durable and long-lasting</li>
              <li><i class="fas fa-check text-success"></i> Safe for pets</li>
              <li><i class="fas fa-check text-success"></i> Easy to clean</li>
              <li><i class="fas fa-check text-success"></i> High-quality materials</li>
            {{/if}}
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Reviews Section -->
  <div class="row mt-5">
    <div class="col-12">
      <h3 class="mb-4">Customer Reviews</h3>
      
      <!-- Review Summary -->
      <div class="card mb-4">
        <div class="card-body">
          <div class="row align-items-center">
            <div class="col-md-3 text-center">
              <h1 class="display-4">4.5</h1>
              <div class="text-warning mb-2">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star-half-alt"></i>
              </div>
              <p class="text-muted">Based on 24 reviews</p>
            </div>
            <div class="col-md-9">
              <div class="mb-2">
                <span class="mr-2">5 stars</span>
                <div class="progress" style="height: 20px; display: inline-block; width: 60%;">
                  <div class="progress-bar bg-success" role="progressbar" style="width: 70%"></div>
                </div>
                <span class="ml-2">70%</span>
              </div>
              <div class="mb-2">
                <span class="mr-2">4 stars</span>
                <div class="progress" style="height: 20px; display: inline-block; width: 60%;">
                  <div class="progress-bar bg-info" role="progressbar" style="width: 20%"></div>
                </div>
                <span class="ml-2">20%</span>
              </div>
              <div class="mb-2">
                <span class="mr-2">3 stars</span>
                <div class="progress" style="height: 20px; display: inline-block; width: 60%;">
                  <div class="progress-bar bg-warning" role="progressbar" style="width: 8%"></div>
                </div>
                <span class="ml-2">8%</span>
              </div>
              <div class="mb-2">
                <span class="mr-2">2 stars</span>
                <div class="progress" style="height: 20px; display: inline-block; width: 60%;">
                  <div class="progress-bar bg-danger" role="progressbar" style="width: 2%"></div>
                </div>
                <span class="ml-2">2%</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Individual Reviews -->
      <div class="card mb-3">
        <div class="card-body">
          <div class="d-flex justify-content-between">
            <div>
              <h5 class="card-title">John D.</h5>
              <div class="text-warning mb-2">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
              </div>
            </div>
            <small class="text-muted">2 weeks ago</small>
          </div>
          <p class="card-text">Excellent product! My dog absolutely loves it. Great quality and fast delivery.</p>
          <button class="btn btn-sm btn-outline-secondary">
            <i class="far fa-thumbs-up"></i> Helpful (12)
          </button>
        </div>
      </div>

      <div class="card mb-3">
        <div class="card-body">
          <div class="d-flex justify-content-between">
            <div>
              <h5 class="card-title">Sarah M.</h5>
              <div class="text-warning mb-2">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="far fa-star"></i>
              </div>
            </div>
            <small class="text-muted">1 month ago</small>
          </div>
          <p class="card-text">Very good value for money. The quality is great and my pets are happy!</p>
          <button class="btn btn-sm btn-outline-secondary">
            <i class="far fa-thumbs-up"></i> Helpful (8)
          </button>
        </div>
      </div>

      <div class="card mb-3">
        <div class="card-body">
          <div class="d-flex justify-content-between">
            <div>
              <h5 class="card-title">Mike R.</h5>
              <div class="text-warning mb-2">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
              </div>
            </div>
            <small class="text-muted">2 months ago</small>
          </div>
          <p class="card-text">Highly recommend! Been buying this for months now and the quality is consistently good.</p>
          <button class="btn btn-sm btn-outline-secondary">
            <i class="far fa-thumbs-up"></i> Helpful (15)
          </button>
        </div>
      </div>

      <!-- Write Review Button -->
      <div class="text-center mt-4">
        <button class="btn btn-primary" data-toggle="modal" data-target="#reviewModal">
          <i class="fas fa-edit"></i> Write a Review
        </button>
      </div>
    </div>
  </div>

  <!-- Related Products -->
  <div class="row mt-5 mb-5">
    <div class="col-12">
      <h3 class="mb-4">You May Also Like</h3>
      <div class="alert alert-info">
        <i class="fas fa-info-circle"></i> Check out our <a href="/browse">full catalog</a> for more products!
      </div>
    </div>
  </div>
</div>

<!-- Review Modal -->
<div class="modal fade" id="reviewModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Write a Review</h5>
        <button type="button" class="close" data-dismiss="modal">
          <span>&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form>
          <div class="form-group">
            <label>Rating</label>
            <div>
              <i class="far fa-star star-rating" data-rating="1"></i>
              <i class="far fa-star star-rating" data-rating="2"></i>
              <i class="far fa-star star-rating" data-rating="3"></i>
              <i class="far fa-star star-rating" data-rating="4"></i>
              <i class="far fa-star star-rating" data-rating="5"></i>
            </div>
          </div>
          <div class="form-group">
            <label>Your Name</label>
            <input type="text" class="form-control" placeholder="Enter your name">
          </div>
          <div class="form-group">
            <label>Review Title</label>
            <input type="text" class="form-control" placeholder="Summary of your review">
          </div>
          <div class="form-group">
            <label>Your Review</label>
            <textarea class="form-control" rows="4" placeholder="Tell us about your experience"></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary">Submit Review</button>
      </div>
    </div>
  </div>
</div>
